<link rel="stylesheet" type="text/css" href="js.css">
<title>Andre | JS</title>
<ul class="card-list">
  
  <li class="card">
    <a class="card-image" href="https://michellezauner.bandcamp.com/album/psychopomp-2" target="_blank" style="background-image: url(https://i.ibb.co/gPpb2Bv/html.png);" data-image-full="https://i.ibb.co/gPpb2Bv/html.png">
      <img src="https://i.ibb.co/gPpb2Bv/html.png" alt="Psychopomp" />
    </a>
    <a class="card-description" href="https://michellezauner.bandcamp.com/album/psychopomp-2" target="_blank">
      <h2>Psychopomp</h2>
      <p>Japanese Breakfast</p>
    </a>
  </li>
  
  <li class="card">
    <a class="card-image" href="https://inlovewithaghost.bandcamp.com/album/lets-go" target="_blank" style="background-image: url(https://i.ibb.co/FmnfyzN/css.png);" data-image-full="https://i.ibb.co/FmnfyzN/css.png">
      <img src="https://i.ibb.co/FmnfyzN/css.png" alt="let's go" />
    </a>
    <a class="card-description" href="https://inlovewithaghost.bandcamp.com/album/lets-go" target="_blank">
      <h2>let's go</h2>
      <p>In Love With A Ghost</p>
    </a>
  </li>
  
  <li class="card">
    <a class="card-image" href="https://vulfpeck.bandcamp.com/album/the-beautiful-game" target="_blank" style="background-image: url(https://i.ibb.co/kcpMpD1/js.png);" data-image-full="https://i.ibb.co/kcpMpD1/js.png">
      <img src="https://i.ibb.co/kcpMpD1/js.png" alt="The Beautiful Game" />
    </a>
    <a class="card-description" href="https://vulfpeck.bandcamp.com/album/the-beautiful-game" target="_blank">
      <h2>The Beautiful Game</h2>
      <p>Vulfpeck</p>
    </a>
  </li>
  
  <li class="card">
    <a class="card-image" href="https://convergecult.bandcamp.com/album/jane-doe" target="_blank" style="background-image: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/310408/jane-doe-100.jpg);" data-image-full="https://s3-us-west-2.amazonaws.com/s.cdpn.io/310408/jane-doe-500.jpg">
      <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/310408/jane-doe-100.jpg" alt="Jane Doe" />
    </a>
    <a class="card-description" href="https://convergecult.bandcamp.com/album/jane-doe" target="_blank">
      <h2>Jane Doe</h2>
      <p>Converge</p>
    </a>
  </li>
  
</ul>

<script>
  // This is "probably" IE9 compatible but will need some fallbacks for IE8
// - (event listeners, forEach loop)

// wait for the entire page to finish loading
window.addEventListener('load', function() {
  
  // setTimeout to simulate the delay from a real page load
  setTimeout(lazyLoad, 1000);
  
});

function lazyLoad() {
  var card_images = document.querySelectorAll('.card-image');
  
  // loop over each card image
  card_images.forEach(function(card_image) {
    var image_url = card_image.getAttribute('data-image-full');
    var content_image = card_image.querySelector('img');
    
    // change the src of the content image to load the new high res photo
    content_image.src = image_url;
    
    // listen for load event when the new photo is finished loading
    content_image.addEventListener('load', function() {
      // swap out the visible background image with the new fully downloaded photo
      card_image.style.backgroundImage = 'url(' + image_url + ')';
      // add a class to remove the blur filter to smoothly transition the image change
      card_image.className = card_image.className + ' is-loaded';
    });
    
  });
  
}


</script>